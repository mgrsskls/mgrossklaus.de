<article class="Note" data-url="{{ url }}">

  {%- if title -%}
    {% if isNote %}
      <h1>
    {% else %}
      <h2>
    {% endif %}
      {%- if til -%}
        <span class="Note-til">
          Today I learned<span class="u-hiddenVisually">:</span>
        </span>
      {%- endif -%}
      {%- if url -%}<a href="{{ url }}" rel="bookmark">{%- endif -%}
        {{ title }}
      {%- if url -%}</a>{%- endif -%}
    {% if isNote %}
      </h1>
    {% else %}
      </h2>
    {% endif %}
  {%- endif -%}

  {%- if date or tags -%}
    <dl class="Note-metaWrapper">
      {%- if date -%}
        <div class="Note-meta">
          <dt class="u-hiddenVisually">Date:</dt>
          <dd><time datetime="{% isoString date %}">{{ date }}</time></dd>
        </div>
      {%- endif -%}
      {%- if tags -%}
        <div class="Note-meta">
          <dt class="u-hiddenVisually">Tags:</dt>
          <dd>
            <ul class="Note-tags">
              {%- for tag in tags -%}
                <li class="Note-tagsItem">
                  {%- assign tagUrl = "/tags/" | append: tag | append: "/" -%}
                  {%- if page.url == tagUrl -%}
                    <span class="Note-tag">{{ tag }}</span>
                  {%- else -%}
                    <a class="Note-tag" href="/tags/{{ tag }}" rel="tag">{{ tag }}</a>
                  {%- endif -%}
                </li>
              {%- endfor -%}
            </ul>
          </dd>
        </div>
      {%- endif -%}
    </dl>
  {%- endif -%}

  {{ content }}

  {%- if source -%}
    <footer>
      <p>
        <small>
          <b>Source:</b> <a href="{{ source }}">{{ source }}</a>
        </small>
      </p>
    </footer>
  {%- endif -%}
</article>
